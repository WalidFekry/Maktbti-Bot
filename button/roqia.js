import database_telegram from '../module/database_telegram.js';
import path from 'path';
import fs from 'fs-extra';


export default async (client, Markup) => {



    client.action("roqia", async (ctx) => {

        try {

            const __dirname = path.resolve();

            await database_telegram({
                id: ctx?.chat?.id,
                username: ctx?.chat?.username,
                name: ctx?.chat?.first_name ? ctx?.chat?.first_name : ctx?.chat?.last_name ? ctx?.chat?.last_name : ctx?.chat?.title,
                type: ctx?.chat?.type,
                message_id: ctx?.message?.message_id
            }, client);
            const photo = fs.readJsonSync(path.join(__dirname, './files/json/roqia.json'));
            const random_photo = photo[Math.floor(Math.random() * photo.length)];
            const audio = ["https://post.walid-fekry.com/audios/roqia/1.mp3", "https://post.walid-fekry.com/audios/roqia/2.mp3", "https://post.walid-fekry.com/audios/roqia/3.mp3", "https://post.walid-fekry.com/audios/roqia/4.mp3", "https://post.walid-fekry.com/audios/roqia/5.mp3", "https://post.walid-fekry.com/audios/roqia/6.mp3"];
            const but_1 = [Markup.button.callback('ğŸ”„', 'roqia')];
            const but_2 = [Markup.button.callback('ØµÙˆØª ğŸ”Š', 'roqia_audio'), Markup.button.callback('Ù†Øµ ğŸ“', 'roqia_text')];
            const but_4 = [Markup.button.callback('Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ğŸ ', 'start')];
            const button = Markup.inlineKeyboard([but_1, but_2, but_4]);
            const button_2 = Markup.inlineKeyboard([but_4]);

            await ctx.replyWithPhoto({ url: random_photo }, {
                reply_markup: button.reply_markup,
                parse_mode: 'HTML'
            });

            client.action('roqia_text', async (ctx) => {
                let message = `<b>Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ ÙˆØ§Ù„ØµÙ„Ø§Ø© ÙˆØ§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„Ù‰ Ø±Ø³ÙˆÙ„ Ø§Ù„Ù„Ù‡ ÙˆØ¹Ù„Ù‰ Ø¢Ù„Ù‡ ÙˆØµØ­Ø¨Ù‡ ÙˆØ¨Ø¹Ø¯:</b>\n\n`;
                message += "ÙØ§Ù„Ø±Ù‚ÙŠØ© Ø§Ù„Ø´Ø±Ø¹ÙŠØ© Ù‡ÙŠ Ù…Ø§ Ø§Ø¬ØªÙ…Ø¹ ÙÙŠÙ‡Ø§ Ø«Ù„Ø§Ø«Ø© Ø£Ù…ÙˆØ± : \n";
                message += "1 - Ø£Ù† ØªÙƒÙˆÙ† Ø¨ÙƒÙ„Ø§Ù… Ø§Ù„Ù„Ù‡ Ø£Ùˆ Ø¨Ø£Ø³Ù…Ø§Ø¦Ù‡ ÙˆØµÙØ§ØªÙ‡ Ø£Ùˆ Ø§Ù„Ù…Ø£Ø«ÙˆØ± Ø¹Ù† Ø§Ù„Ù†Ø¨ÙŠ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù… .\n";
                message += "2 - Ø°ÙƒØ± Ø´ÙŠØ® Ø§Ù„Ø¥Ø³Ù„Ø§Ù… Ø§Ø¨Ù† ØªÙŠÙ…ÙŠØ© Ø´Ø±Ø·Ø§Ù‹ ÙˆÙ‡Ùˆ Ø£Ù† ØªÙƒÙˆÙ† Ø¨Ø§Ù„Ù„Ø³Ø§Ù† Ø§Ù„Ø¹Ø±Ø¨ÙŠ ÙˆÙ…Ø§ ÙŠØ¹Ø±Ù Ù…Ø¹Ù†Ø§Ù‡ : ÙÙƒÙ„ Ø§Ø³Ù… Ù…Ø¬Ù‡ÙˆÙ„ ÙÙ„ÙŠØ³ Ù„Ø£Ø­Ø¯ Ø£Ù† ÙŠØ±Ù‚ÙŠ Ø¨Ù‡ ÙØ¶Ù„Ø§Ù‹ Ø¹Ù† Ø£Ù† ÙŠØ¯Ø¹Ùˆ Ø¨Ù‡ ÙˆÙ„Ùˆ Ø¹Ø±Ù Ù…Ø¹Ù†Ø§Ù‡ Ù„Ø£Ù†Ù‡ ÙŠÙƒØ±Ù‡ Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ø¨ØºÙŠØ± Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ØŒ ÙˆØ¥Ù†Ù…Ø§ ÙŠØ±Ø®Øµ Ù„Ù…Ù† Ù„Ø§ ÙŠØ­Ø³Ù† Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ØŒ ÙØ£Ù…Ø§ Ø¬Ø¹Ù„ Ø§Ù„Ø£Ù„ÙØ§Ø¸ Ø§Ù„Ø£Ø¹Ø¬Ù…ÙŠØ© Ø´Ø¹Ø§Ø±Ø§Ù‹ ÙÙ„ÙŠØ³ Ù…Ù† Ø¯ÙŠÙ† Ø§Ù„Ø¥Ø³Ù„Ø§Ù… .\n";
                message += "3 -Ø£Ù† ÙŠØ¹ØªÙ‚Ø¯ Ø£Ù† Ø§Ù„Ø±Ù‚ÙŠØ© Ù„Ø§ ØªØ¤Ø«Ø± Ø¨Ø°Ø§ØªÙ‡Ø§ Ø¨Ù„ Ø¨ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ù„Ù‡ ØªØ¹Ø§Ù„Ù‰ .\n \n";
                message += `ÙØ¥Ø°Ø§ ÙƒØ§Ù†Øª Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ø«Ù„Ø§Ø«Ø© Ù…Ø¬ØªÙ…Ø¹Ø© ÙÙŠ Ø§Ù„Ø±Ù‚ÙŠØ© ÙÙ‡ÙŠ Ø§Ù„Ø±Ù‚ÙŠØ© Ø§Ù„Ø´Ø±Ø¹ÙŠØ© ØŒ ÙˆÙ‚Ø¯ Ù‚Ø§Ù„ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù… : " Ù„Ø§ Ø¨Ø£Ø³ Ø¨Ø§Ù„Ø±Ù‚Ù‰ Ù…Ø§ Ù„Ù… ØªÙƒÙ† Ø´Ø±ÙƒØ§Ù‹ ". Ø±ÙˆØ§Ù‡ Ù…Ø³Ù„Ù… .
                ÙˆØ¥Ù† Ø£Ù†ÙØ¹ Ø§Ù„Ø±Ù‚ÙŠØ© ÙˆØ£ÙƒØ«Ø±Ù‡Ø§ ØªØ£Ø«ÙŠØ±Ø§Ù‹ Ø±Ù‚ÙŠØ© Ø§Ù„Ø¥Ù†Ø³Ø§Ù† Ù†ÙØ³Ù‡ ØŒ ÙˆØ°Ù„Ùƒ Ù„Ù…Ø§ ÙˆØ±Ø¯ ÙÙŠ Ø§Ù„Ù†ØµÙˆØµ Ø¹Ù„Ù‰ Ø¹ÙƒØ³ Ù…Ø§ Ø§Ø´ØªÙ‡Ø± Ø¹Ù†Ø¯ ÙƒØ«ÙŠØ± Ù…Ù† Ø§Ù„Ù†Ø§Ø³ Ù…Ù† Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù‚Ø§Ø±Ø¦ ÙˆÙ„Ùˆ ÙƒØ§Ù† Ø¹Ø§Ù…ÙŠØ§Ù‹ Ø£Ùˆ Ù…Ø´Ø¹ÙˆØ°Ø§Ù‹ .
                ÙˆØ³ÙˆØ±Ø© Ø§Ù„ÙØ§ØªØ­Ø© Ù…Ù† Ø£Ù†ÙØ¹ Ù…Ø§ ÙŠÙ‚Ø±Ø£ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø±ÙŠØ¶ ØŒ ÙˆØ°Ù„Ùƒ Ù„Ù…Ø§ ØªØ¶Ù…Ù†ØªÙ‡ Ù‡Ø°Ù‡ Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„Ø¹Ø¸ÙŠÙ…Ø© Ù…Ù† Ø¥Ø®Ù„Ø§Øµ Ø§Ù„Ø¹Ø¨ÙˆØ¯ÙŠØ© Ù„Ù„Ù‡ ÙˆØ§Ù„Ø«Ù†Ø§Ø¡ Ø¹Ù„ÙŠÙ‡ Ø¹Ø²ÙˆØ¬Ù„ ÙˆØªÙÙˆÙŠØ¶ Ø§Ù„Ø£Ù…Ø± ÙƒÙ„Ù‡ Ø¥Ù„ÙŠÙ‡ ÙˆØ§Ù„Ø§Ø³ØªØ¹Ø§Ù†Ø© Ø¨Ù‡ ÙˆØ§Ù„ØªÙˆÙƒÙ„ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ø¤Ø§Ù„Ù‡ Ù…Ø¬Ø§Ù…Ø¹ Ø§Ù„Ù†Ø¹Ù… ØŒ ÙˆÙ„Ù…Ø§ ÙˆØ±Ø¯ ÙÙŠÙ‡Ø§ Ù…Ù† Ø§Ù„Ù†ØµÙˆØµ Ù…Ø«Ù„ Ø±Ù‚ÙŠØ© Ø§Ù„Ù„Ø¯ÙŠØº Ø§Ù„ÙˆØ§Ø±Ø¯Ø© ÙÙŠ ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ.
                -Ø¹Ù†Ø¯ Ø±Ù‚ÙŠØ© Ø§Ù„Ù…Ø±ÙŠØ¶ ÙŠÙ‚ÙˆÙ„: " Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø£Ø±Ù‚ÙŠÙƒ Ù…Ù† ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ¤Ø°ÙŠÙƒØŒ ÙˆÙ…Ù† Ø´Ø± ÙƒÙ„ Ù†ÙØ³ Ø£Ùˆ Ø¹ÙŠÙ† Ø­Ø§Ø³Ø¯ Ø§Ù„Ù„Ù‡ ÙŠØ´ÙÙŠÙƒØŒ Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ Ø£Ø±Ù‚ÙŠÙƒ ". Ø±ÙˆØ§Ù‡ Ù…Ø³Ù„Ù… .
                ÙˆØ¥Ø°Ø§ Ø§Ø´ØªÙƒÙ‰ Ø£Ù„Ù…Ø§Ù‹ ÙÙŠ Ø¬Ø³Ø¯Ù‡ ÙŠØ¶Ø¹ ÙŠØ¯Ù‡ Ø¹Ù„Ù‰ Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø£Ù„Ù… ÙˆÙŠÙ‚ÙˆÙ„ : " Ø¨Ø³Ù… Ø§Ù„Ù„Ù‡ (Ø«Ù„Ø§Ø«Ø§Ù‹) ÙˆÙŠÙ‚ÙˆÙ„: (Ø³Ø¨Ø¹ Ù…Ø±Ø§Øª) : Ø£Ø¹ÙˆØ° Ø¨Ø¹Ø²Ø© Ø§Ù„Ù„Ù‡ ÙˆÙ‚Ø¯Ø±ØªÙ‡ Ù…Ù† Ø´Ø± Ù…Ø§ Ø£Ø¬Ø¯ ÙˆØ£Ø­Ø§Ø°Ø± ". Ø±ÙˆØ§Ù‡ Ù…Ø³Ù„Ù… . ÙˆØ§Ù„Ø±Ù‚ÙŠØ© Ø§Ù„Ø´Ø±Ø¹ÙŠØ© ØªÙ†ÙØ¹ Ù…Ù† Ø§Ù„Ø¹ÙŠÙ† ÙˆØ§Ù„Ø³Ø­Ø± ÙˆØ§Ù„Ù…Ø³ ÙˆÙƒØ°Ø§ Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„Ø¹Ø¶ÙˆÙŠØ©.
                ÙˆÙ‚Ø¯ ØªÙƒÙˆÙ† Ø§Ù„Ø¥ØµØ§Ø¨Ø© Ù…Ù† Ø§Ù„Ø¹ÙŠÙ† ØŒ ÙÙ‚Ø¯ Ù‚Ø§Ù„ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù… : " Ø§Ù„Ø¹ÙŠÙ† Ø­Ù‚ ÙˆÙ„Ùˆ ÙƒØ§Ù† Ø´ÙŠØ¡ Ø³Ø§Ø¨Ù‚ Ø§Ù„Ù‚Ø¯Ø± Ù„Ø³Ø¨Ù‚ØªÙ‡ Ø§Ù„Ø¹ÙŠÙ† ". Ø±ÙˆØ§Ù‡ Ù…Ø³Ù„Ù… . ÙˆØ¹Ù† Ø¹Ø§Ø¦Ø´Ø© Ø±Ø¶ÙŠ Ø§Ù„Ù„Ù‡ Ø¹Ù†Ù‡Ø§ Ù‚Ø§Ù„Øª : "Ø£Ù…Ø±Ù†ÙŠ Ø§Ù„Ù†Ø¨ÙŠ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù… Ø£Ùˆ Ø£Ù…Ø± Ø§Ù„Ù†Ø¨ÙŠ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù… Ø£Ù† Ù†Ø³ØªØ±Ù‚ÙŠ Ù…Ù† Ø§Ù„Ø¹ÙŠÙ†" . Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ.
                ÙˆÙ‚Ø¯ Ø±Ø£Ù‰ Ø§Ù„Ù†Ø¨ÙŠ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù… ÙÙŠ Ø¨ÙŠØª Ø£Ù… Ø³Ù„Ù…Ø© Ø¬Ø§Ø±ÙŠØ© ÙÙŠ ÙˆØ¬Ù‡Ù‡Ø§ Ø³ÙØ¹Ø© ÙÙ‚Ø§Ù„: " Ø§Ø³ØªØ±Ù‚ÙˆØ§ Ù„Ù‡Ø§ ÙØ¥Ù† Ø¨Ù‡Ø§ Ø§Ù„Ù†Ø¸Ø±Ø© ". Ø±ÙˆØ§Ù‡ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ.
                ÙˆØ¥Ø°Ø§ Ø¹Ø±Ù Ø§Ù„Ø¹Ø§Ø¦Ù† ÙÙŠØ¤Ù…Ø± Ø¨Ø£Ù† ÙŠÙØ¹Ù„ Ù…Ø§ Ø£Ù…Ø± Ø¨Ù‡ Ø§Ù„Ù†Ø¨ÙŠ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù… ØŒ ÙˆØ°Ù„Ùƒ Ø£Ù† Ø¹Ø§Ù…Ø± Ø¨Ù† Ø±Ø¨ÙŠØ¹Ø© Ø±Ø£Ù‰ Ø³Ù‡Ù„ Ø¨Ù† Ø­Ù†ÙŠÙ ÙŠØºØªØ³Ù„ ÙÙ‚Ø§Ù„ : ÙˆØ§Ù„Ù„Ù‡ Ù…Ø§ Ø±Ø£ÙŠØª ÙƒØ§Ù„ÙŠÙˆÙ… ÙˆÙ„Ø§ Ø¬Ù„Ø¯ Ù…Ø®Ø¨Ø£Ø© : Ù‚Ø§Ù„ : ÙÙ„Ø¨Ø· Ø³Ù‡Ù„ ØŒ ÙØ£ØªÙ‰ Ø±Ø³ÙˆÙ„ Ø§Ù„Ù„Ù‡ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù… Ø¹Ø§Ù…Ø±Ø§Ù‹ ÙØªØºÙŠØ¸ Ø¹Ù„ÙŠÙ‡ ÙˆÙ‚Ø§Ù„: Ø¹Ù„Ø§Ù… ÙŠÙ‚ØªÙ„ Ø£Ø­Ø¯ÙƒÙ… Ø£Ø®Ø§Ù‡ØŸ Ø£Ù„Ø§ Ø¨Ø±ÙƒØª . Ø§ØºØªØ³Ù„ Ù„Ù‡ " ÙØºØ³Ù„ Ø¹Ø§Ù…Ø± ÙˆØ¬Ù‡Ù‡ ÙˆÙŠØ¯ÙŠÙ‡ ÙˆÙ…Ø±ÙÙ‚ÙŠÙ‡ ÙˆØ±ÙƒØ¨ØªÙŠÙ‡ ÙˆØ£Ø·Ø±Ø§Ù Ø±Ø¬Ù„ÙŠÙ‡ ÙˆØ¯Ø§Ø®Ù„Ø© Ø¥Ø²Ø§Ø±Ù‡ ÙÙŠ Ù‚Ø¯Ø­ Ø«Ù… ØµØ¨ Ø¹Ù„ÙŠÙ‡ ÙØ±Ø§Ø­ Ø³Ù‡Ù„ Ù…Ø¹ Ø§Ù„Ù†Ø§Ø³". Ø±ÙˆØ§Ù‡ Ù…Ø§Ù„Ùƒ .
                ÙˆÙ…Ù…Ø§ ÙŠÙ‚ÙŠ Ù…Ù† Ø´Ø± Ø§Ù„Ø¹ÙŠÙ† Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ© ÙˆØ§Ù„Ù…Ø³Ø§Ø¦ÙŠØ© ÙˆØ£Ù† ÙŠØªÙˆÙƒÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù„Ù‡ ØªØ¹Ø§Ù„Ù‰.
                \n \n`;
                message += "Ù‡Ø°Ø§ ÙˆÙ…Ù† Ø£Ù†ÙØ¹ Ù…Ø§ ÙŠÙ‚ÙŠ Ù…Ù† Ø§Ù„Ø³Ø­Ø± Ø¨Ù„ ÙˆÙ…Ù† ÙƒÙ„ Ø´Ø± : Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© Ø¹Ù„Ù‰ Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­ ÙˆØ§Ù„Ù…Ø³Ø§Ø¡ ÙˆÙ‚Ø±Ø§Ø¡Ø© Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ ÙˆØ³ÙˆØ±Ø© Ø§Ù„Ø¥Ø®Ù„Ø§Øµ ÙˆØ§Ù„Ù…Ø¹ÙˆØ°ØªÙŠÙ† Ø¹Ù‚Ø¨ ÙƒÙ„ ØµÙ„Ø§Ø© ÙˆØ¹Ù†Ø¯ Ø§Ù„Ù†ÙˆÙ… ÙˆÙ‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¢ÙŠØªÙŠÙ† Ù…Ù† Ø¢Ø®Ø± Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø© ÙƒÙ„ Ù„ÙŠÙ„Ø© . \n";
                message += "ÙˆØ§Ù„Ù„Ù‡ Ø£Ø¹Ù„Ù… ."
                await ctx.reply(message, { parse_mode: 'HTML', reply_markup: button_2.reply_markup, });
            });
            
            client.action('roqia_audio', async (ctx) => {
                const random_audio = audio[Math.floor(Math.random() * audio.length)];
                const name = "Ø§Ù„Ø±Ù‚ÙŠØ© Ø§Ù„Ø´Ø±Ø¹ÙŠØ©";
                await ctx.replyWithAudio({ url: random_audio, filename: name }, {
                    reply_markup: button_2.reply_markup,
                    parse_mode: 'HTML',
                    caption: `<b>Ø§Ù„Ø±Ù‚ÙŠØ© Ø§Ù„Ø´Ø±Ø¹ÙŠØ© Ø§Ù„Ø´Ø§Ù…Ù„Ø© ğŸ”Š</b>`,
                });
            });

            await ctx.reply("â—ƒâ”€â”€â”€â”€â”€â€¢â—â€¢â”€â”€â”€â”€â”€â–¹");


        } catch (error) {
            console.error(error);
        }
    });

}